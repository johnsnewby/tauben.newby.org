<!doctype html>
<html>
  <head>
    <title>How it Works</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="pigeon.css">
  </head>
  <body>
    <div class="container">
      <h1>The TaubenCam, a useless quarantine project.</h1>

      <h2>Introduction</h2>
      <div style="float:right">
        <a href="babies-large.jpg"><img src="babies.jpg" width="300" alt="babies"/></a>
      </div>

      <p>I am a freelance developer, currently not working and confined to my apartment in Berlin. Under these circumstances a person needs a project.</p>

      <p>Last year a pair of wood pigeons came and nested on our balcony, where they raised  <a href="babies-large.jpg">two very ugly babies.</a>
        This year they are back, and of course the natural thing to do is to attempt to broadcast this miracle of new life into the world.</p>

      <p>The goals of the project are
        <ul>
          <li>to film the pigeons
          <li> to enable broadcasting the pigeons over a household ADSL connection for as many viewers as I can get
          <li> to do all of it with a Raspberry Pi and camera, and the cheapest possible webserver, out there on the internet
        </ul>


      <p>In order to do this I have set up a VPN using Nebula, from Slack. I use a cheap linux webserver which costs USD5.95/month (I know there are cheaper), and I have written a custom application which takes one stream from the camera, but only when there are viewers, and re-sends it to each connected viewer.</p>

      <div style="clear: both;"></div>
      <h2>Hardware and software resources</h2>

      <p>Currently the system is working using a Raspberry Pi 3B+, a wide-angle camera, and a 1m long cable I bought from Amazon.
        <div style="float:right">
          <a href="Pi-large.jpg"><img src="Pi-smaller.jpg" width="300" alt="Raspberry Pi"/></a></div>

      <p>The software used on the Pi is <a href="https://motion-project.github.io/">motion</a>, and  <a href="https://github.com/slackhq/nebula">nebula</a>. The idea is to do as little smart stuff as possible on the Pi, which is not super stable when the camera is running, and all processing on a relatively powerful machine.</p>

      <p>The glue for everything is a motion jpeg proxy which I wrote in Rust, my current language of choice. It is insanely over-engineered for such a project, and time will tell whether it&rsquo;s stable enough. The source code is <a href="https://github.com/johnsnewby/mjpeg">here</a>, and it would please me enormously if other people found some use for this.</p>

      <p>The camera is mounted inside a 3d-printed case which I made (<a href="camera_case.scad">source code</a>) using <a href="https://www.openscad.org">OpenScad</a>, which is held up by wire taken from a coat-hanger.</p>
      <div style="float-right"><a href="camera-large.jpg"><img src="camera-small.jpg" alt="camera" width="300"></a></div>

      <p>The whole thing works in the Berlin rain because of <a href="https://www.corrosionx.com/products/corrosionx">CorrosionX</a>, which is an extraordinary thing.</p>

      <p>All sources on the <a href="https://github.com/johnsnewby/tauben.newby.org">github repo</a>
      <div style="clear: both;"></div>

      <h3>Network Reources</h3>

      <p>As stated, the Pi is on my local network, and there is a cheap virtual server somewhere in the cloud which is the public face of this project.</p>
    </div>
  </body>
</html>
